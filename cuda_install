#---check version of ubuntu
lsb_release -a

#---check if you have cuda capable gpu
lspci | grep -i nvidia
uname -m && cat /etc/*release
gcc --version

mkdir cuda
cd cuda

#-- go to https://developer.nvidia.com/cuda-downloads?target_os=Linux&target_arch=x86_64&target_distro=Ubuntu&target_version=1604&target_type=deblocal
#-- follow prompts for cuda toolkit installer

#--reinstall toolkit in terminal--??? I dunno
sudo apt-get install nvidia-cuda-toolkit

nvcc --version

#--go to https://docs.nvidia.com/cuda/cuda-installation-guide-linux/
#--follow instructions for ubuntu

#--confirm install of cuda
! /usr/bin/nvidia-smi
cat /proc/driver/nvidia/version
nvidia-smi

#---need to install cuDNN
https://developer.nvidia.com/cudnn-downloads?target_os=Linux&target_arch=x86_64&Distribution=Ubuntu&target_version=22.04&target_type=deb_local
#---follow guide

sudo apt-get install python3-pip
sudo apt install python3-virtualenv

#---go into cuda folder and create virtual environment
virtualenv -p py3.12.3 venv
#--activate virual environment
source venv/bin/activate


break 
sudo apt-get install linux-headers-$(uname -r)
sudo apt-key del 7fa2af80
sudo apt-key add /var/cuda-repo-ubuntu2004-11-3-local/7fa2af80.pub
wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-archive-keyring.gpg
sudo cp cuda-archive-keyring.gpg /usr/share/keyrings/
sudo apt-get --allow-releaseinfo-change update
echo "deb [signed-by=/usr/share/keyrings/cuda-archive-keyring.gpg] https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/ /" | sudo tee /etc/apt/sources.list.d/cuda-ubuntu2004-x86_64.list
sudo apt-get update
sudo apt-get install cuda-toolkit
sudo apt-get install nvidia-gds
reboot
export PATH=/usr/local/cuda-12.6/bin${PATH:+:${PATH}}
export LD_LIBRARY_PATH=/usr/local/cuda-12.6/lib64\
                         ${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}
/usr/bin/nvidia-persistenced --verbose
cat /proc/driver/nvidia/version

#---cuda should work
export PATH=/usr/local/cuda-12.6/bin:$PATH
cuda-gdb

git clone https://github.com/NVIDIA/cuda-samples.git
cd cuda-samples/
make
make dbg=1
make SMS="50 60"
make HOST_COMPILER=g++
cd /home/deviancedev01/cuda/cuda-samples/bin/x86_64/linux/release
./deviceQuery
./bandwidthTest


